# Video Chapter Splitter

å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒ£ãƒ—ã‚¿ãƒ¼æƒ…å ±ã«åŸºã¥ã„ã¦è‡ªå‹•åˆ†å‰²ã™ã‚‹Pythonãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ç‰¹å¾´

- ğŸ¬ MP4å‹•ç”»ã‚’ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã”ã¨ã«åˆ†å‰²
- ğŸµ éŸ³å£°ã®ç„¡åŠ£åŒ–ã‚³ãƒ”ãƒ¼å¯¾å¿œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- ğŸ“Š é€²æ—ãƒãƒ¼è¡¨ç¤º
- ğŸ¯ æŸ”è»Ÿãªæ™‚é–“ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¯¾å¿œ
- âš¡ GPU ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¯¾å¿œï¼ˆè‡ªå‹•æ¤œå‡ºå¯èƒ½ï¼‰
- ğŸ” ãƒãƒ£ãƒ—ã‚¿ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•æ¤œå‡ºï¼ˆå‹•ç”»å.txtï¼‰
- ğŸ“¦ pip ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯¾å¿œï¼ˆ`video-chapter-splitter`ã‚³ãƒãƒ³ãƒ‰ï¼‰
- ğŸ¯ æ­£ç¢ºãªã‚«ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆ`--accurate`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- ğŸš« "--"ã§å§‹ã¾ã‚‹ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã®è‡ªå‹•é™¤å¤–æ©Ÿèƒ½

## å¿…è¦è¦ä»¶

- Python 3.7+
- FFmpegï¼ˆã‚·ã‚¹ãƒ†ãƒ ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ï¼‰

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# PyPIã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå…¬é–‹å¾Œï¼‰
pip install video-chapter-splitter

# GitHubã‹ã‚‰ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install git+https://github.com/yourusername/video-chapter-splitter.git

# é–‹ç™ºç”¨ï¼ˆãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³å¾Œï¼‰
git clone https://github.com/yourusername/video-chapter-splitter.git
cd video-chapter-splitter
pip install -e .
```

## ä½¿ã„æ–¹

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```bash
# pip ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œ
video-chapter-splitter input.mp4 chapters.txt

# ãƒãƒ£ãƒ—ã‚¿ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çœç•¥ï¼ˆinput.txt ã‚’è‡ªå‹•çš„ã«ä½¿ç”¨ï¼‰
video-chapter-splitter input.mp4

# é–‹ç™ºæ™‚ï¼ˆãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ç›´æ¥å®Ÿè¡Œï¼‰
python src/video_chapter_splitter.py input.mp4
```

### ãƒãƒ£ãƒ—ã‚¿ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼

ãƒãƒ£ãƒ—ã‚¿ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€å‹•ç”»ã¨åŒã˜åå‰ã§æ‹¡å¼µå­ã‚’`.txt`ã«ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«æ¤œå‡ºã—ã¾ã™ã€‚
ä¾‹: `video.mp4` â†’ `video.txt`

ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã®å½¢å¼ï¼š
```
00:00:00 ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°
00:03:45 ç¬¬1ç«  - ã¯ã˜ã‚ã«
00:15:30 --CM 
00:16:30 ç¬¬2ç«  - ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
00:45:00 ç¬¬3ç«  - ã¾ã¨ã‚
00:50:00 --ã‚¨ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ«
01:00:00 ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
```

**æ³¨æ„**: `--`ã§å§‹ã¾ã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ï¼ˆä¾‹: `--CM`ã€`--ã‚¨ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ«`ï¼‰ã¯è‡ªå‹•çš„ã«é™¤å¤–ã•ã‚Œã¾ã™ã€‚

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
# åŸºæœ¬ä½¿ç”¨ï¼ˆãƒãƒ£ãƒ—ã‚¿ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•æ¤œå‡ºï¼‰
video-chapter-splitter input.mp4

# ãƒãƒ£ãƒ—ã‚¿ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜ç¤ºçš„ã«æŒ‡å®š
video-chapter-splitter input.mp4 chapters.txt

# ã‚ˆã‚Šæ­£ç¢ºãªã‚«ãƒƒãƒˆï¼ˆå‡¦ç†æ™‚é–“ã¯é•·ããªã‚Šã¾ã™ï¼‰
video-chapter-splitter --accurate input.mp4

# GPU ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆè‡ªå‹•æ¤œå‡ºï¼‰
video-chapter-splitter --gpu auto input.mp4

# ç‰¹å®šã®GPUã‚’ä½¿ç”¨
video-chapter-splitter --gpu videotoolbox input.mp4  # macOS
video-chapter-splitter --gpu nvenc input.mp4         # NVIDIA
video-chapter-splitter --gpu qsv input.mp4           # Intel
video-chapter-splitter --gpu amf input.mp4           # AMD

# ãƒ“ãƒ‡ã‚ªã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã‚’æŒ‡å®š
video-chapter-splitter --video-codec libx264 input.mp4

# éŸ³å£°ã‚’å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆæŒ‡å®šï¼‰
video-chapter-splitter --audio-codec aac --audio-bitrate 256k input.mp4

# å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®š
video-chapter-splitter --output-dir my_chapters input.mp4

# è¤‡æ•°ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’çµ„ã¿åˆã‚ã›ã‚‹
video-chapter-splitter --accurate --gpu auto --output-dir chapters input.mp4 chapters.txt
```

## è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|-----------|------|------------|
| `--video-codec` | ãƒ“ãƒ‡ã‚ªã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ | `copy`ï¼ˆç„¡åŠ£åŒ–ï¼‰ |
| `--video-bitrate` | ãƒ“ãƒ‡ã‚ªãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆ(kbps) | å…ƒã®ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆ |
| `--audio-codec` | ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ | `copy`ï¼ˆç„¡åŠ£åŒ–ï¼‰ |
| `--audio-bitrate` | ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆ(kbps) | 192k |
| `--output-dir` | å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«å |
| `--accurate` | æ­£ç¢ºãªã‚«ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ | ç„¡åŠ¹ |
| `--gpu` | GPUã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | ç„¡åŠ¹ |

### GPUã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

`--gpu`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§é«˜é€Ÿãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒå¯èƒ½ï¼š

- **auto**: åˆ©ç”¨å¯èƒ½ãªGPUã‚’è‡ªå‹•æ¤œå‡º
- **videotoolbox**: Apple Silicon Macï¼ˆM1/M2/M3ï¼‰ã‚„Intel Mac
- **nvenc**: NVIDIA GPUï¼ˆGeForceã€Quadroï¼‰
- **qsv**: Intel Quick Sync Video
- **amf**: AMD GPU

### å‡¦ç†ãƒ¢ãƒ¼ãƒ‰ã®é•ã„

1. **é€šå¸¸ãƒ¢ãƒ¼ãƒ‰**ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
   - æœ€é€Ÿå‡¦ç†ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚³ãƒ”ãƒ¼ã‚’ä½¿ç”¨
   - ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã®ä½ç½®ã«ã‚ˆã‚Šæ•°ãƒ•ãƒ¬ãƒ¼ãƒ ã®ãšã‚ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§

2. **æ­£ç¢ºãƒ¢ãƒ¼ãƒ‰**ï¼ˆ`--accurate`ï¼‰
   - ã‚ˆã‚Šæ­£ç¢ºãªã‚«ãƒƒãƒˆä½ç½®
   - å‡¦ç†æ™‚é–“ã¯é•·ããªã‚‹ãŒã€æŒ‡å®šæ™‚åˆ»ã«ã‚ˆã‚Šè¿‘ã„ä½ç½®ã§ã‚«ãƒƒãƒˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯[LICENSE](LICENSE)ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼å¤§ããªå¤‰æ›´ã‚’è¡Œã†å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã«ã¤ã„ã¦è­°è«–ã—ã¦ãã ã•ã„ã€‚

## ä½œè€…

MASAMI MASHINO (mashi.zzz@gmail.com)
